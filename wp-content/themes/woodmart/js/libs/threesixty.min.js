!function(i){"use strict";i.ThreeSixty=function(e,t){var n,o=this,r=[];o.$el=i(e),o.el=e,o.$el.data("ThreeSixty",o),o.init=function(){(n=i.extend({},i.ThreeSixty.defaultOptions,t)).disableSpin&&(n.currentFrame=1,n.endFrame=1),o.initProgress(),o.loadImages()},o.resize=function(){},o.initProgress=function(){o.$el.css({width:n.width+"px",height:n.height+"px","background-image":"none !important"}),n.styles&&o.$el.css(n.styles),o.responsive(),o.$el.find(n.progress).css({marginTop:n.height/2-15+"px"}),o.$el.find(n.progress).fadeIn("slow"),o.$el.find(n.imgList).hide()},o.loadImages=function(){var e=document.createElement("li"),t=n.zeroBased?0:1,t=n.imgArray?n.imgArray[n.loadedImages]:n.domain+n.imagePath+n.filePrefix+o.zeroPad(n.loadedImages+t)+n.ext+(o.browser.isIE()?"?"+(new Date).getTime():""),t=i("<img>").attr("src",t).addClass("previous-image").appendTo(e);r.push(t),o.$el.find(n.imgList).append(e),i(t).on("load",function(){o.imageLoaded()})},o.imageLoaded=function(){n.loadedImages+=1,i(n.progress+" span").text(Math.floor(n.loadedImages/n.totalFrames*100)+"%"),n.loadedImages>=n.totalFrames?(n.disableSpin&&r[0].removeClass("previous-image").addClass("current-image"),i(n.progress).fadeOut("slow",function(){i(this).hide(),o.showImages(),o.showNavigation()})):o.loadImages()},o.showImages=function(){o.$el.find(".txtC").fadeIn(),o.$el.find(n.imgList).fadeIn(),o.ready=!0,n.ready=!0,n.drag&&o.initEvents(),o.refresh(),o.initPlugins(),n.onReady(),setTimeout(function(){o.responsive()},50)},o.initPlugins=function(){i.each(n.plugins,function(e,t){if("function"!=typeof i[t])throw new Error(t+" not available.");i[t].call(o,o.$el,n)})},o.showNavigation=function(){var e,t,r,a;n.navigation&&!n.navigation_init&&(e=i("<div/>").attr("class","nav_bar"),t=i("<a/>").attr({href:"#",class:"nav_bar_next"}).html("next"),r=i("<a/>").attr({href:"#",class:"nav_bar_previous"}).html("previous"),a=i("<a/>").attr({href:"#",class:"nav_bar_play"}).html("play"),e.append(r),e.append(a),e.append(t),o.$el.prepend(e),t.bind("mousedown touchstart",o.next),r.bind("mousedown touchstart",o.previous),a.bind("mousedown touchstart",o.play_stop),n.navigation_init=!0)},o.play_stop=function(e){e.preventDefault(),n.autoplay?(n.autoplay=!1,i(e.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(n.play),n.play=null):(n.autoplay=!0,n.play=setInterval(o.moveToNextFrame,n.playSpeed),i(e.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"))},o.next=function(e){e&&e.preventDefault(),n.endFrame-=5,o.refresh()},o.previous=function(e){e&&e.preventDefault(),n.endFrame+=5,o.refresh()},o.play=function(e,t){e=e||n.playSpeed,t=t||n.autoplayDirection;n.autoplayDirection=t,n.autoplay||(n.autoplay=!0,n.play=setInterval(o.moveToNextFrame,e))},o.stop=function(){n.autoplay&&(n.autoplay=!1,clearInterval(n.play),n.play=null)},o.moveToNextFrame=function(){1===n.autoplayDirection?--n.endFrame:n.endFrame+=1,o.refresh()},o.gotoAndPlay=function(e){var t,r;n.disableWrap?(n.endFrame=e,o.refresh()):(t=1<(t=0===(t=Math.ceil(n.endFrame/n.totalFrames))?1:t)?n.endFrame-(t-1)*n.totalFrames:n.endFrame,r=n.totalFrames-t,r=0<e-t?e-t<t+(n.totalFrames-e)?n.endFrame+(e-t):n.endFrame-(t+(n.totalFrames-e)):t-e<r+e?n.endFrame-(t-e):n.endFrame+(r+e),t!==e&&(n.endFrame=r,o.refresh()))},o.initEvents=function(){o.$el.bind("mousedown touchstart touchmove touchend mousemove click",function(e){e.preventDefault(),"mousedown"===e.type&&1===e.which||"touchstart"===e.type?(n.pointerStartPosX=o.getPointerEvent(e).pageX,n.dragging=!0,n.onDragStart(n.currentFrame)):"touchmove"===e.type?o.trackPointer(e):"touchend"===e.type&&(n.dragging=!1,n.onDragStop(n.endFrame))}),i(document).bind("mouseup",function(e){n.dragging=!1,n.onDragStop(n.endFrame),i(this).css("cursor","none")}),i(window).bind("resize",function(e){o.responsive()}),i(document).bind("mousemove",function(e){n.dragging?(e.preventDefault(),!o.browser.isIE&&n.showCursor&&o.$el.css("cursor","url(assets/images/hand_closed.png), auto")):!o.browser.isIE&&n.showCursor&&o.$el.css("cursor","url(assets/images/hand_open.png), auto"),o.trackPointer(e)}),i(window).on("resize",function(){o.resize()})},o.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},o.trackPointer=function(e){n.ready&&n.dragging&&(n.pointerEndPosX=o.getPointerEvent(e).pageX,n.monitorStartTime<(new Date).getTime()-n.monitorInt&&(n.pointerDistance=n.pointerEndPosX-n.pointerStartPosX,0<n.pointerDistance?n.endFrame=n.currentFrame+Math.ceil((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/o.$el.width())):n.endFrame=n.currentFrame+Math.floor((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/o.$el.width())),n.disableWrap&&(n.endFrame=Math.min(n.totalFrames-(n.zeroBased?1:0),n.endFrame),n.endFrame=Math.max(n.zeroBased?0:1,n.endFrame)),o.refresh(),n.monitorStartTime=(new Date).getTime(),n.pointerStartPosX=o.getPointerEvent(e).pageX))},o.refresh=function(){0===n.ticker&&(n.ticker=setInterval(o.render,Math.round(1e3/n.framerate)))},o.render=function(){var e;n.currentFrame!==n.endFrame?(e=n.endFrame<n.currentFrame?Math.floor(.1*(n.endFrame-n.currentFrame)):Math.ceil(.1*(n.endFrame-n.currentFrame)),o.hidePreviousFrame(),n.currentFrame+=e,o.showCurrentFrame(),o.$el.trigger("frameIndexChanged",[o.getNormalizedCurrentFrame(),n.totalFrames])):(window.clearInterval(n.ticker),n.ticker=0)},o.hidePreviousFrame=function(){r[o.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image")},o.showCurrentFrame=function(){r[o.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image")},o.getNormalizedCurrentFrame=function(){var e,t;return n.disableWrap?(e=Math.min(n.currentFrame,n.totalFrames-(n.zeroBased?1:0)),t=Math.min(n.endFrame,n.totalFrames-(n.zeroBased?1:0)),e=Math.max(e,n.zeroBased?0:1),t=Math.max(t,n.zeroBased?0:1),n.currentFrame=e,n.endFrame=t):(e=Math.ceil(n.currentFrame%n.totalFrames))<0&&(e+=n.totalFrames-(n.zeroBased?1:0)),e},o.getCurrentFrame=function(){return n.currentFrame},o.responsive=function(){n.responsive&&o.$el.css({height:o.$el.find(".current-image").first().css("height"),width:"100%"})},o.zeroPad=function(e){var t=Math.log(n.totalFrames)/Math.LN10,t=Math.round(1e3*t)/1e3,r=Math.floor(t)+1,a=e.toString();if(n.zeroPadding)for(;a.length<r;)a="0"+a;return a},o.browser={},o.browser.isIE=function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName&&(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),-1!==t},o.getConfig=function(){return n},i.ThreeSixty.defaultOptions={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1,disableWrap:!1,responsive:!1,zeroPadding:!1,zeroBased:!1,plugins:[],showCursor:!1,drag:!0,onReady:function(){},onDragStart:function(){},onDragStop:function(){},imgList:".threesixty_images",imgArray:null,playSpeed:100},o.init()},i.fn.ThreeSixty=function(e){return Object.create(new i.ThreeSixty(this,e))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t});