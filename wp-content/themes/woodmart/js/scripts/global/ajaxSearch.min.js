!function(m){woodmartThemeModule.$document.on("wdShopPageInit",function(){woodmartThemeModule.ajaxSearch()}),m.each(["frontend/element_ready/wd_search.default"],function(e,t){woodmartThemeModule.wdElementorAddAction(t,function(){woodmartThemeModule.ajaxSearch()})}),woodmartThemeModule.ajaxSearch=function(){void 0!==m.fn.devbridgeAutocomplete&&m("form.woodmart-ajax-search").each(function(){var o=m(this),n=parseInt(o.data("count")),s=parseInt(o.data("thumbnail")),d=parseInt(o.data("symbols_count")),r=o.find('[name="product_cat"]'),i=o.parent().find(".wd-dropdown-results > .wd-scroll-content"),c=o.data("post_type"),l=woodmart_settings.ajaxurl+"?action=woodmart_ajax_search",u=parseInt(o.data("price")),p=o.data("sku");0<n&&(l+="&number="+n),l+="&post_type="+c,i.on("click",".view-all-results",function(){o.submit()}),r.length&&""!==r.val()&&(l+="&product_cat="+r.val()),o.find('[type="text"]').on("focus keyup",function(){var e,t,a=m(this);a.hasClass("wd-search-inited")||(a.devbridgeAutocomplete({serviceUrl:l,appendTo:i,minChars:d,deferRequestBy:woodmart_settings.ajax_search_delay,onSelect:function(e){0<e.permalink.length&&(window.location.href=e.permalink)},onHide:function(){i.parent().removeClass("wd-opened")},onSearchStart:function(){o.addClass("search-loading")},beforeRender:function(e){m(e).find(".suggestion-divider-title").parent().addClass("suggestion-divider"),2<e[0].childElementCount&&m(e).append('<div class="view-all-results"><span>'+woodmart_settings.all_results+"</span></div>"),m(e).removeAttr("style")},onSearchComplete:function(){o.removeClass("search-loading"),woodmartThemeModule.$document.trigger("wood-images-loaded")},formatResult:function(e,t){var t="("+(t="&"===t?"&#038;":t).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")",a="";return e.divider&&(a+=' <h5 class="suggestion-divider-title">'+e.divider+"</h5>"),s&&e.thumbnail&&(a+=' <div class="suggestion-thumb">'+e.thumbnail+"</div>"),e.value&&(a=(a+=' <div class="suggestion-content set-cont-mb-s reset-last-child">')+'<h4 class="wd-entities-title">'+e.value.replace(new RegExp(t,"gi"),"<strong>$1</strong>").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</h4>"),p&&e.sku&&(a+=' <p class="suggestion-sku">'+e.sku+"</p>"),u&&e.price&&(a+=' <p class="price">'+e.price+"</p>"),e.value&&(a+=" </div>"),e.no_found&&(a='<span class="no-found-msg">'+e.value+"</span>"),i.parent().addClass("wd-opened"),a}}),r.length&&(e=o.find('[type="text"]').devbridgeAutocomplete(),t=woodmart_settings.ajaxurl+"?action=woodmart_ajax_search",0<n&&(t+="&number="+n),t+="&post_type="+c,r.on("cat_selected",function(){""!==r.val()?e.setOptions({serviceUrl:t+"&product_cat="+r.val()}):e.setOptions({serviceUrl:t}),e.hide(),e.onValueChange()})),a.addClass("wd-search-inited"))}),woodmartThemeModule.$document.on("click",function(e){e=e.target;m(e).is(".wd-search-form")||m(e).parents().is(".wd-search-form")||m(e).is(".wd-search-full-screen")||m(e).parents().is(".wd-search-full-screen")||o.find('[type="text"]').devbridgeAutocomplete("hide")}),m(".wd-dropdown-results > .wd-scroll-content").on("click",function(e){e.stopPropagation()})})},m(document).ready(function(){woodmartThemeModule.ajaxSearch()})}(jQuery);