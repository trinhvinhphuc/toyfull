!function(n){woodmartThemeModule.woodmartCompare=function(){var o="woodmart_compare_list";if(woodmart_settings.is_multisite&&(o+="_"+woodmart_settings.current_blog_id),"undefined"!=typeof Cookies){var e=woodmartThemeModule.$body,t=n(".wd-header-compare"),o=Cookies.get(o);if(0<t.length)if(void 0!==o)try{var a=JSON.parse(o);t.find(".wd-tools-count").text(a.length)}catch(o){console.log("cant parse cookies json")}else t.find(".wd-tools-count").text(0);e.on("click",".wd-compare-btn a",function(o){var e=n(this),t=e.data("id"),a=e.data("added-text");if(e.hasClass("added"))return!0;o.preventDefault(),e.addClass("loading"),jQuery.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_add_to_compare",id:t},dataType:"json",method:"GET",success:function(o){o.table?(d(o),woodmartThemeModule.$document.trigger("added_to_compare")):console.log("something wrong loading compare data ",o)},error:function(){console.log("We cant add to compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){e.removeClass("loading").addClass("added"),(0<e.find("span").length?e.find("span"):e).text(a)}})}),e.on("click",".wd-compare-remove",function(o){o.preventDefault();var e=n(this),o=e.data("id");e.addClass("loading"),jQuery.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_remove_from_compare",id:o},dataType:"json",method:"GET",success:function(o){o.table?d(o):console.log("something wrong loading compare data ",o)},error:function(){console.log("We cant remove product compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){e.addClass("loading")}})})}function d(o){var e=n(".wd-header-compare"),e=(0<e.length&&e.find(".wd-tools-count").text(o.count),n(".wd-compare-table"));0<e.length&&e.replaceWith(o.table)}},n(document).ready(function(){woodmartThemeModule.woodmartCompare()})}(jQuery);